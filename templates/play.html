<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>NBA Success</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header"><!--
        <a class="navbar-brand" href="index.html">
          <img class = "logo" src = "logo.png">
        </a> -->
        <a class = "navbar-brand" href="index.html"><h1>Success in the NBA</h1></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Machine Learning<span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="vorp.html">VORP</a></li>
              <li><a href="play.html">Play</a></li>
            </ul>
          </li>
          <li><a href="viz.html" class = "nav-link">Viz</a></li>
          <li><a href="data.html" class = "nav-link">Data</a></li>
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>

  <!-- Intro text -->
  <div class = "container">
      <div class = "row">
        <div class = "col-md-6 col-lg-12">
            <h3><b>Not all drafted players get to play.</b></h3>
            <p>This model used players' pre-NBA data to predict whether or not they actually ended up playing in their first NBA season, or whether they had to sit sadly on the sidelines.</p>
            <p><b>Steps:</b></p>
            <ol>
                <li><a href = "#feat-sel">Feature Selection</a></li>
                <li><a href = "#fit">Fitting</a></li>
                <li><a href = "#test-new">Testing on New Data</a></li>
            </ol>
            <p>Abbreviated code is included but the full code can be found <a href = "https://github.com/aeisenba61/Basketball-Analysis-Repo/blob/master/ml_logistic/pred_roster.md" target = "_blank">here</a>.</p>
        </div>
      </div>


<!-- Feature selection -->


      <div class = "row">
        <div class = "col-md-6 col-lg-12">
            <a id = "feat-sel"><h3><b>1. Feature Selection</b></h3></a>
            <p>We used <b>stratified k-fold cross-validation</b> to pick features by getting correlations between <code>Roster</code>, which represents whether a drafted player actually played in their first NBA season, and each pre-NBA variable:</p>
            <ul>
                <li><code>draft_All_NBA</code>: Number of All-NBA games</li>
                <li><code>draft_All.Star</code>: Number of All-Star games</li>
                <li><code>draft_Pk</code>: Draft pick order</li>
                <li><code>draft_Games</code>: Number of games</li>
                <li><code>draft_Minutes.Played</code>: Total minutes played</li>
                <li><code>draft_PTS</code>: Total points</li>
                <li><code>draft_Win.Share</code>: Win-share</li>
                <li><code>draft_VORP</code>: Value over replacement</li>
                <li><code>draft_WS_per_game</code>: Win-share per game</li>
                <li><code>draft_attend_college</code>: Drafted from college</li>
            </ul>
        </div>
      </div>
      <button data-toggle = "collapse" data-target = "#k-fold-corr">Code</button>
          <div id = "k-fold-corr" class = "collapse"><br>

    <!-- All features object -->
                <div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># All features</span>
                <span class="n">all_feat</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;draft_All_NBA&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_All.Star&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_Pk&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_Games&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_Minutes.Played&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_PTS&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_Win.Share&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_VORP&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_WS_per_game&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;draft_attend_college&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Roster&quot;</span><span class="p">]</span>
                </pre></div>

    <!-- Select all-features from data -->

                <div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">orig_data</span><span class="p">[</span><span class="n">all_feat</span><span class="p">]</span>
                </pre></div>

    <!-- Correlations -->
                <div class=" highlight hl-ipython3"><pre><span></span><span class="n">skf</span> <span class="o">=</span> <span class="n">StratifiedKFold</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Roster&quot;</span><span class="p">],</span> <span class="n">n_folds</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
                <span class="n">fold_count</span> <span class="o">=</span> <span class="mi">1</span>

                <span class="n">corrs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

                <span class="c1"># Correlations with &quot;Roster&quot;</span>

                <span class="k">for</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">skf</span><span class="p">:</span>

                    <span class="c1"># Log</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt;&gt;&gt; Running fold </span><span class="si">{fold_count}</span><span class="s2"> &lt;&lt;&lt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="c1"># Training &amp; testing dfs</span>
                    <span class="n">train_fold</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">train</span><span class="p">]</span>
                    <span class="n">test_fold</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">test</span><span class="p">]</span>

                    <span class="c1"># Best features</span>
                    <span class="n">corr</span> <span class="o">=</span> <span class="n">train_fold</span><span class="o">.</span><span class="n">corr</span><span class="p">()[</span><span class="s2">&quot;Roster&quot;</span><span class="p">][</span><span class="n">train_fold</span><span class="o">.</span><span class="n">corr</span><span class="p">()[</span><span class="s2">&quot;Roster&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">corrs</span> <span class="o">=</span> <span class="n">corrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
                    <span class="n">corrs</span> <span class="o">=</span> <span class="n">corrs</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Roster&quot;</span><span class="p">:</span> <span class="n">f</span><span class="s2">&quot;Fold </span><span class="si">{fold_count}</span><span class="s2">&quot;</span><span class="p">})</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>

                    <span class="c1"># Increment fold</span>
                    <span class="n">fold_count</span> <span class="o">+=</span> <span class="mi">1</span>
                </pre></div></div>

<!-- Correlations table -->

      <button data-toggle = "collapse" data-target = "#all-corr">K-fold correlations</button>
        <div class = "collapse" id = "all-corr"><br>
                <table class="table table-hover">
          <thead>
            <tr style="text-align: right;">
              <th></th>
              <th>draft_All.Star</th>
              <th>draft_All_NBA</th>
              <th>draft_Games</th>
              <th>draft_Minutes.Played</th>
              <th>draft_PTS</th>
              <th>draft_Pk</th>
              <th>draft_VORP</th>
              <th>draft_WS_per_game</th>
              <th>draft_Win.Share</th>
              <th>draft_attend_college</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th>Fold 1</th>
              <td>0.092333</td>
              <td>0.081221</td>
              <td>0.425231</td>
              <td>0.359540</td>
              <td>0.322347</td>
              <td>-0.476737</td>
              <td>0.154236</td>
              <td>0.214060</td>
              <td>0.258547</td>
              <td>0.394295</td>
            </tr>
            <tr>
              <th>Fold 2</th>
              <td>0.087764</td>
              <td>0.075172</td>
              <td>0.423274</td>
              <td>0.356813</td>
              <td>0.322062</td>
              <td>-0.472424</td>
              <td>0.154821</td>
              <td>0.222859</td>
              <td>0.262194</td>
              <td>0.392000</td>
            </tr>
            <tr>
              <th>Fold 3</th>
              <td>0.090852</td>
              <td>0.079252</td>
              <td>0.412525</td>
              <td>0.343076</td>
              <td>0.313548</td>
              <td>-0.473138</td>
              <td>0.154413</td>
              <td>0.206054</td>
              <td>0.255142</td>
              <td>0.394334</td>
            </tr>
            <tr>
              <th>Fold 4</th>
              <td>0.093020</td>
              <td>0.080739</td>
              <td>0.411227</td>
              <td>0.346426</td>
              <td>0.311299</td>
              <td>-0.475965</td>
              <td>0.155018</td>
              <td>0.208127</td>
              <td>0.257448</td>
              <td>0.376509</td>
            </tr>
            <tr>
              <th>Fold 5</th>
              <td>0.090485</td>
              <td>0.083803</td>
              <td>0.410928</td>
              <td>0.349561</td>
              <td>0.314959</td>
              <td>-0.480477</td>
              <td>0.158346</td>
              <td>0.208149</td>
              <td>0.260038</td>
              <td>0.355815</td>
            </tr>
            <tr>
              <th>Fold 6</th>
              <td>0.090935</td>
              <td>0.078666</td>
              <td>0.412884</td>
              <td>0.348459</td>
              <td>0.313178</td>
              <td>-0.481536</td>
              <td>0.154057</td>
              <td>0.212840</td>
              <td>0.256029</td>
              <td>0.364547</td>
            </tr>
            <tr>
              <th>Fold 7</th>
              <td>0.104137</td>
              <td>0.091895</td>
              <td>0.406784</td>
              <td>0.345066</td>
              <td>0.312609</td>
              <td>-0.484338</td>
              <td>0.155775</td>
              <td>0.216417</td>
              <td>0.256753</td>
              <td>0.383185</td>
            </tr>
            <tr>
              <th>Fold 8</th>
              <td>0.093933</td>
              <td>0.081421</td>
              <td>0.422848</td>
              <td>0.356401</td>
              <td>0.320499</td>
              <td>-0.491569</td>
              <td>0.155129</td>
              <td>0.211037</td>
              <td>0.261862</td>
              <td>0.345254</td>
            </tr>
            <tr>
              <th>Fold 9</th>
              <td>0.094896</td>
              <td>0.082639</td>
              <td>0.424135</td>
              <td>0.359760</td>
              <td>0.323905</td>
              <td>-0.475576</td>
              <td>0.160469</td>
              <td>0.230046</td>
              <td>0.264547</td>
              <td>0.364104</td>
            </tr>
            <tr>
              <th>Fold 10</th>
              <td>0.098792</td>
              <td>0.086542</td>
              <td>0.435905</td>
              <td>0.366800</td>
              <td>0.330893</td>
              <td>-0.482906</td>
              <td>0.164172</td>
              <td>0.229397</td>
              <td>0.272318</td>
              <td>0.371106</td>
            </tr>
          </tbody>
          </table>
          </div><br>
        </div>

<!-- Correlation explanation -->
    <div class = "container">
        <br>
        <p>We averaged the correlations produced from each of the k = 10 folds and selected only <b>correlations above .3</b>.<br>The <b>final features</b> were:</p>
        <ul>
            <li><code>draft_Pk</code>: Draft pick order</li>
            <li><code>draft_Games</code>: Number of games</li>
            <li><code>draft_attend_college</code>: Drafted from college</li>
            <li><code>draft_Minutes.Played</code>: Total minutes played</li>
            <li><code>draft_PTS</code>: Total points</li>
        </ul>

      <button data-toggle = "collapse" data-target = "#avg-corr-code">Code</button>
        <div class = "collapse" id = "avg-corr-code"><br>
            <div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Average correlations</span>
            <span class="n">avg_corrs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">corrs</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
            <span class="n">avg_corrs</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Avg corr&quot;</span><span class="p">]</span>
            <span class="n">avg_corrs</span><span class="p">[</span><span class="s2">&quot;Avg corr (Abs)&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">avg_corrs</span><span class="p">[</span><span class="s2">&quot;Avg corr&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>
            <span class="n">avg_corrs</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">&quot;Avg corr (Abs)&quot;</span><span class="p">],</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
            </pre></div>

<!-- Select features > .3 -->
            <div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Top features - greater than .3 corr w Roster</span>
            <span class="n">sel_feat</span> <span class="o">=</span> <span class="n">avg_corrs</span><span class="p">[</span><span class="n">avg_corrs</span><span class="p">[</span><span class="s2">&quot;Avg corr (Abs)&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">.</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">sel_feat</span>
            </pre></div>
        </div>

      <button data-toggle = "collapse" data-target = "#avg-corr">Avg. correlations</button><br>
        <div class = "collapse col-lg-6" id = "avg-corr">
            <table class="table table-hover">
              <thead>
                <tr style="text-align: right;">
                  <th></th>
                  <th>Avg corr</th>
                  <th>Avg corr (Abs)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>draft_Pk</th>
                  <td>-0.479467</td>
                  <td>0.479467</td>
                </tr>
                <tr>
                  <th>draft_Games</th>
                  <td>0.418574</td>
                  <td>0.418574</td>
                </tr>
                <tr>
                  <th>draft_attend_college</th>
                  <td>0.374115</td>
                  <td>0.374115</td>
                </tr>
                <tr>
                  <th>draft_Minutes.Played</th>
                  <td>0.353190</td>
                  <td>0.353190</td>
                </tr>
                <tr>
                  <th>draft_PTS</th>
                  <td>0.318530</td>
                  <td>0.318530</td>
                </tr>
                <tr class = "ns">
                  <th>draft_Win.Share</th>
                  <td>0.260488</td>
                  <td>0.260488</td>
                </tr>
                <tr class = "ns">
                  <th>draft_WS_per_game</th>
                  <td>0.215899</td>
                  <td>0.215899</td>
                </tr>
                <tr class = "ns">
                  <th>draft_VORP</th>
                  <td>0.156643</td>
                  <td>0.156643</td>
                </tr>
                <tr class = "ns">
                  <th>draft_All.Star</th>
                  <td>0.093715</td>
                  <td>0.093715</td>
                </tr>
                <tr class = "ns">
                  <th>draft_All_NBA</th>
                  <td>0.082135</td>
                  <td>0.082135</td>
                </tr>
              </tbody>
            </table>
            <b>&ensp;Note.</b> <i>Avg corr (Abs)</i> refers to the absolute value of the correlation. Correlations in gray were below .3.
        </div><br>

    </div>
  </div>

<!-- Tableau Viz -->
  <div class = "container">
      <div class = "row">
        <div class = "col-md-6 col-lg-12">
          <h4><b>Visualize the Final Features</b></h4>
          <div class='tableauPlaceholder' id='viz1524322804669' style='position: relative'>
            <noscript>
              <a href='#'>
                <img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ba&#47;BasketballAnalysis&#47;PlayedorNot&#47;1_rss.png' style='border: none' />
              </a>
            </noscript>
            <object class='tableauViz'  style='display:none;'>
              <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
              <param name='embed_code_version' value='3' />
              <param name='site_root' value='' />
              <param name='name' value='BasketballAnalysis&#47;PlayedorNot' />
              <param name='tabs' value='No' /><param name='toolbar' value='yes' />
              <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ba&#47;BasketballAnalysis&#47;PlayedorNot&#47;1.png' />
              <param name='animate_transition' value='yes' />
              <param name='display_static_image' value='yes' />
              <param name='display_spinner' value='yes' />
              <param name='display_overlay' value='yes' />
              <param name='display_count' value='yes' />
              <param name='filter' value='publish=yes' />
            </object>
          </div>
<script type='text/javascript'>
  var divElement = document.getElementById('viz1524322804669');
  var vizElement = divElement.getElementsByTagName('object')[0];
      vizElement.style.width='1000px';vizElement.style.height='600px';
  var scriptElement = document.createElement('script');
      scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
      vizElement.parentNode.insertBefore(scriptElement, vizElement);
</script>
        </div>
      </div>


<!-- Cross-validation -->

  <div class = "container">
      <div class = "row">
        <div class = "col-md-6 col-lg-12">
            <a id = "fit"><h3><b>2. Fitting</b></h3></a>
            <p>We fit the classifier by getting predictions on the entire 2000-2015 draft dataset with k = 10-fold cross-validation. The classifier performed well but was <b>more effective in classifying players who played</b>, possibly because of the larger sample size.</p>

            <p><a href = "https://github.com/aeisenba61/Basketball-Analysis-Repo/blob/master/ml_logistic/predictions/draft00_15_preds.csv" target = "_blank">Predicted probabilities for each player: 2000-2015 draft classes</a></p>
        </div>
      </div>

      <button data-toggle = "collapse" data-target = "#cv-code">Code</button>
          <div class = "collapse" id = "cv-code"><br>

            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">sel_feat</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Roster&quot;</span><span class="p">]</span>
            </pre></div>

            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">predicted</span> <span class="o">=</span> <span class="n">cross_val_predict</span><span class="p">(</span><span class="n">LogisticRegression</span><span class="p">(),</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cv</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
            <span class="n">acc_score</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">predicted</span><span class="p">)</span>
            <span class="n">roster_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Did not play&quot;</span><span class="p">,</span> <span class="s2">&quot;Played&quot;</span><span class="p">]</span>

            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Accuracy score: {round(acc_score, 2)}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Classification report&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">metrics</span><span class="o">.</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">predicted</span><span class="p">,</span> <span class="n">target_names</span> <span class="o">=</span> <span class="n">roster_vars</span><span class="p">))</span>
            </pre></div>

          </div>

    <br><br><p><b>Accuracy score: 0.86</b></p>
    <p><b>Classification report:</b></p>
    <div class = "col-md-6">
        <table class="table table-hover">
                  <thead>
                    <tr style="text-align: right;">
                      <th></th>
                      <th title = "Of players classifed, how many were classified correctly">Precision</th>
                      <th title = "Of players actually in each group, how many classified correctly">Recall</th>
                      <th title = "2 * precision * recall/(precision + recall)">F1 Score</th>
                      <th>Support</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th>Did not play</th>
                      <td>0.76</td>
                      <td>0.69</td>
                      <td>0.72</td>
                      <td>234</td>
                    </tr>
                    <tr>
                      <th>Played</th>
                      <td>0.89</td>
                      <td>0.92</td>
                      <td>0.91</td>
                      <td>655</td>
                    </tr>
                    <tr>
                      <th>Average/Total</th>
                      <td>0.86</td>
                      <td>0.86</td>
                      <td>0.86</td>
                      <td>889</td>
                    </tr>
                  </tbody>
        </table>
    </div>
    </div>

<!-- Testing on new data -->
  <div class = "container">
      <div class = "row">
        <div class = "col-md-6 col-lg-12">
            <a id = "test-new"><h3><b>3. Testing on New Data</b></h3></a>
            <p>We pickled the classifier then tested it on a new dataset, with data from the 2016 draft class. The classifier performed considerably worse, presumably because of the small and skewed sample sizes. It was <b> much more effective in classifying players who played.</b></p>

            <p><a href = "https://github.com/aeisenba61/Basketball-Analysis-Repo/blob/master/ml_logistic/predictions/draft16_preds.csv" target = "_blank">Predicted probabilities for each player: 2016 draft class</a></p>
        </div>
      </div>

<!-- Pickling -->

      <button data-toggle = "collapse" data-target = "#pickle">Code</button><br>
        <div id = "pickle" class = "collapse"><br>

            <div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Save classifier</span>
            <span class="kn">import</span> <span class="nn">pickle</span>
            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;final_classifier.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">))</span>
            </pre></div>

            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">classifier</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;final_classifier.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>
            </pre></div>

            <div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Prediction</span>
            <span class="n">new_pred</span> <span class="o">=</span> <span class="n">classifier</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_new</span><span class="p">)</span>
            <span class="n">pred_act</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Roster (Pred)&quot;</span><span class="p">:</span> <span class="n">new_pred</span><span class="p">,</span>
                                     <span class="s2">&quot;Roster (Actual)&quot;</span><span class="p">:</span> <span class="n">y_new</span><span class="p">})</span>
            </pre></div>

            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_acc_score</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_new</span><span class="p">,</span> <span class="n">new_pred</span><span class="p">)</span>
            <span class="n">roster_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Did not play&quot;</span><span class="p">,</span> <span class="s2">&quot;Played&quot;</span><span class="p">]</span>

            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Accuracy score: {round(new_acc_score, 2)}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Classification report&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">metrics</span><span class="o">.</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_new</span><span class="p">,</span> <span class="n">new_pred</span><span class="p">,</span> <span class="n">target_names</span> <span class="o">=</span> <span class="n">roster_vars</span><span class="p">))</span>
            </pre></div>
        </div>

    <br><p><b>Accuracy score: 0.69</b></p>
    <p><b>Classification report:</b></p>
    <div class = "col-md-6">
        <table class="table table-hover">
                  <thead>
                    <tr style="text-align: right;">
                      <th></th>
                      <th title = "Of players classifed, how many were classified correctly">Precision</th>
                      <th title = "Of players actually in each group, how many classified correctly">Recall</th>
                      <th title = "2 * precision * recall/(precision + recall)">F1 Score</th>
                      <th>Support</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th>Did not play</th>
                      <td>0.17</td>
                      <td>0.22</td>
                      <td>0.19</td>
                      <td>9</td>
                    </tr>
                    <tr>
                      <th>Played</th>
                      <td>0.83</td>
                      <td>0.78</td>
                      <td>0.80</td>
                      <td>45</td>
                    </tr>
                    <tr>
                      <th>Average/Total</th>
                      <td>0.72</td>
                      <td>0.69</td>
                      <td>0.70</td>
                      <td>54</td>
                    </tr>
                  </tbody>
        </table>
    </div>
    </div>
    </div>

  </div>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

</html>
